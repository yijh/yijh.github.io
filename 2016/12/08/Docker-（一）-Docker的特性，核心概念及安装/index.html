<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Docker-（一）-Docker的特性，核心概念及安装 | 呆子萌的</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="整 理：dengbo.zhang@zhiyoubao.com时 间：2016-11-21 下午

一.特 性一次封装到处运行，很好的说明了Docker的跨平台和强移植性。
1.Docker容器与传统虚拟机技术的特性对比


特 性
Docker容器
传统虚拟机




启动速度
秒级
分钟级


硬盘使用
一般为MB
一般为GB


性能
接近原生系统
相对弱于


系统支持量
单机支持上千个容">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker-（一）-Docker的特性，核心概念及安装">
<meta property="og:url" content="http://yoursite.com/2016/12/08/Docker-（一）-Docker的特性，核心概念及安装/index.html">
<meta property="og:site_name" content="呆子萌的">
<meta property="og:description" content="整 理：dengbo.zhang@zhiyoubao.com时 间：2016-11-21 下午

一.特 性一次封装到处运行，很好的说明了Docker的跨平台和强移植性。
1.Docker容器与传统虚拟机技术的特性对比


特 性
Docker容器
传统虚拟机




启动速度
秒级
分钟级


硬盘使用
一般为MB
一般为GB


性能
接近原生系统
相对弱于


系统支持量
单机支持上千个容">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3706969-63ccc4006a094c97.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2016-12-08T07:15:03.158Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Docker-（一）-Docker的特性，核心概念及安装">
<meta name="twitter:description" content="整 理：dengbo.zhang@zhiyoubao.com时 间：2016-11-21 下午

一.特 性一次封装到处运行，很好的说明了Docker的跨平台和强移植性。
1.Docker容器与传统虚拟机技术的特性对比


特 性
Docker容器
传统虚拟机




启动速度
秒级
分钟级


硬盘使用
一般为MB
一般为GB


性能
接近原生系统
相对弱于


系统支持量
单机支持上千个容">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/3706969-63ccc4006a094c97.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
  
    <link rel="alternate" href="/atom.xml" title="呆子萌的" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">呆子萌的</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Docker-（一）-Docker的特性，核心概念及安装" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/08/Docker-（一）-Docker的特性，核心概念及安装/" class="article-date">
  <time datetime="2016-12-08T07:14:34.000Z" itemprop="datePublished">2016-12-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Docker-（一）-Docker的特性，核心概念及安装
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<p>整 理：dengbo.zhang@zhiyoubao.com<br>时 间：2016-11-21 下午</p>
<hr>
<h2 id="一-特-性"><a href="#一-特-性" class="headerlink" title="一.特 性"></a>一.特 性</h2><p>一次封装到处运行，很好的说明了Docker的跨平台和强移植性。</p>
<h3 id="1-Docker容器与传统虚拟机技术的特性对比"><a href="#1-Docker容器与传统虚拟机技术的特性对比" class="headerlink" title="1.Docker容器与传统虚拟机技术的特性对比"></a>1.Docker容器与传统虚拟机技术的特性对比</h3><table>
<thead>
<tr>
<th>特 性</th>
<th>Docker容器</th>
<th>传统虚拟机</th>
</tr>
</thead>
<tbody>
<tr>
<td>启动速度</td>
<td>秒级</td>
<td>分钟级</td>
</tr>
<tr>
<td>硬盘使用</td>
<td>一般为MB</td>
<td>一般为GB</td>
</tr>
<tr>
<td>性能</td>
<td>接近原生系统</td>
<td>相对弱于</td>
</tr>
<tr>
<td>系统支持量</td>
<td>单机支持上千个容器</td>
<td>一般几十个</td>
</tr>
</tbody>
</table>
<h3 id="2-Docker容器与传统虚拟机技术的不同之处"><a href="#2-Docker容器与传统虚拟机技术的不同之处" class="headerlink" title="2.Docker容器与传统虚拟机技术的不同之处"></a>2.Docker容器与传统虚拟机技术的不同之处</h3><p>传统方式是在硬件层面实现虚拟化，需要有额外的虚拟机管理应用和虚拟机操作系统层。<br><img src="http://upload-images.jianshu.io/upload_images/3706969-63ccc4006a094c97.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="传统虚拟化与Docker虚拟化"></p>
<p>Docker容器是在操作系统层面上实现虚拟化，直接复用本机本地的操作系统，因此更加轻量级，性能方面也更加高效。</p>
<h2 id="二-核心概念"><a href="#二-核心概念" class="headerlink" title="二.核心概念"></a>二.核心概念</h2><ul>
<li>镜像</li>
<li>容器</li>
<li>仓库</li>
</ul>
<h3 id="1-镜像"><a href="#1-镜像" class="headerlink" title="1.镜像"></a>1.镜像</h3><p>Docker镜像（image）类似于虚拟机镜像，可以将它理解为一个面向Docker引擎的只读模板，包含了文件系统。</p>
<p>例如：一个镜像可以只包含一个完整的Centos操作系统环境，可以把它称为一个Centos镜像，镜像也可以安装了Nginx应用程序（或者用户需要的其他软件），可以把它称为一个Nginx镜像。</p>
<p>镜像是创建Docker容器的基础，通过版本管理和增量的文件系统，Docker提供了一套十分简单的机制（仓库）创建和更新现有镜像，用户可以从网上下载一个已经做好的应用镜像，并通过命令直接创建Docker容器来使用。</p>
<h3 id="2-容器"><a href="#2-容器" class="headerlink" title="2.容器"></a>2.容器</h3><p>Docker容器（Container）类似于一个箱子，可以把容器看做是一个简易的Linux系统环境（其中包括root用户权限，进程空间，用户空间和网路空间等），以及运行在其中的应用程序打包而成的一个箱子。Docker利用容器这个箱子来隔离和运行应用镜像。</p>
<p>容器是从镜像创建的应用运行实例，可以对他进行启动，停止，删除等常规操作。这些不同的容器之间都是相互隔离互不可见的。镜像自身是只读的，容器从镜像启动的时候，Docker会在镜像的最上层创建一个可写层，镜像本身将保持不变。</p>
<h3 id="3-仓库"><a href="#3-仓库" class="headerlink" title="3.仓库"></a>3.仓库</h3><p>Docker仓库（Repostory）类似于代码的仓库（与svn、git、maven等概念类似）是Docker用来集中存放镜像文件的场所。</p>
<p>根据所存储的镜像是否公开分享，Docker仓库又分为：</p>
<ul>
<li>1.公开仓库  </li>
<li>2.私有仓库</li>
</ul>
<p>顾名思义，公开仓库就是公共开放的镜像存储的地方，目前最大的公开仓库是Dokcer Hub （registry.hub.docker.com），存放了大量的镜像可供下载使用，国内的公开仓库有aliyun（acs-public-mirror.oss-cn-hangzhou.aliyuncs.com）。私有仓库是内部使用的私有不对外开放的仓库，用户可以内部自行搭建，内部分享镜像，方便快捷的分享专属环境的镜像文件。</p>
<h2 id="三-Docker的安装"><a href="#三-Docker的安装" class="headerlink" title="三 .Docker的安装"></a>三 .Docker的安装</h2><p>Docker支持在所有主流操作系统上运行（Ubuntu、CentOS、Windows以及MacOS）。我这里只整理Docker在Linux（Ubuntu、CentOS）环境的安装，其他平台的安装如有需要自行Google或者度娘。</p>
<ul>
<li>Ubuntu</li>
<li>CentOS </li>
</ul>
<h3 id="1-Docker在Ubuntu上的安装"><a href="#1-Docker在Ubuntu上的安装" class="headerlink" title="1.Docker在Ubuntu上的安装"></a>1.Docker在Ubuntu上的安装</h3><h5 id="3-1-1-Ubuntu14-04及以上版本的系统官方软件源中已经自带了Docker包，可以直接安装"><a href="#3-1-1-Ubuntu14-04及以上版本的系统官方软件源中已经自带了Docker包，可以直接安装" class="headerlink" title="3.1.1) Ubuntu14.04及以上版本的系统官方软件源中已经自带了Docker包，可以直接安装"></a>3.1.1) Ubuntu14.04及以上版本的系统官方软件源中已经自带了Docker包，可以直接安装</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$sudo apt-get update</div><div class="line">$sudo apt-get install -y docker.io</div><div class="line">$sudo ln -sf /usr/bin/docker.io /usr/local/bin/docker</div><div class="line">$sudo sed -i &apos;$acomplete -F _docker docker&apos; /etc/bash_completion.d/docker.io</div></pre></td></tr></table></figure>
<p>使用操作系统自带包安装 Docker，目前安装的版本是比较旧的版本。 要安装更新的版本，可以通过使用 Docker 源的方式。</p>
<p>安装最新的 Docker 版本，首先需要安装 apt-transport-https 支持，之后通过添加源来安装。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">安装 apt-transport-https 支持</div><div class="line">$ sudo apt-get install apt-transport-https</div><div class="line">将Docker官方资料库的访问Key添加到你本地系统</div><div class="line">$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 </div><div class="line">  --recv-keys 36A1D7869245C8950F966E92D8576A8BA88D21E9</div><div class="line">$ sudo bash -c &quot;echo deb https://get.docker.io/ubuntu docker main &gt; </div><div class="line">  /etc/apt/sources.list.d/docker.list&quot;</div><div class="line">$ sudo apt-get update</div><div class="line">$ sudo apt-get install lxc-docker</div></pre></td></tr></table></figure>
<p>或者简单的一条命令（在系统安装了curl和apt-transport-https支持的前提下）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -sSL https://get.docker.io/ubuntu/ | sudo sh</div></pre></td></tr></table></figure>
<h5 id="3-1-2-如果系统是Ubuntu-14-04之前的较低版本的老系统，需要先更新系统内核才能安装Docker"><a href="#3-1-2-如果系统是Ubuntu-14-04之前的较低版本的老系统，需要先更新系统内核才能安装Docker" class="headerlink" title="3.1.2) 如果系统是Ubuntu 14.04之前的较低版本的老系统，需要先更新系统内核才能安装Docker"></a>3.1.2) 如果系统是Ubuntu 14.04之前的较低版本的老系统，需要先更新系统内核才能安装Docker</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">升级内核并重启</div><div class="line">$ sudo apt-get update</div><div class="line">$ sudo apt-get install linux-image-generic-lts-raring linux-headers-generic-lts-raring</div><div class="line">$ sudo reboot</div></pre></td></tr></table></figure>
<p>内核升级完了，然后按照上面步骤继续安装Docker即可。</p>
<p>安装之后启动 Docker 服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo service docker start</div></pre></td></tr></table></figure>
<h3 id="2-Docker在CentOS上的安装"><a href="#2-Docker在CentOS上的安装" class="headerlink" title="2.Docker在CentOS上的安装"></a>2.Docker在CentOS上的安装</h3><h5 id="3-2-1-CentOS-6上安装Docker"><a href="#3-2-1-CentOS-6上安装Docker" class="headerlink" title="3.2.1) CentOS 6上安装Docker"></a>3.2.1) CentOS 6上安装Docker</h5><p>官方文档要求Linux kernel至少3.8以上，且docker只能运行在64位的系统中。由于RHEL 6和CentOS 6的内核版本为2.6，因此必须要先升级内核（内核升级过程自行Google，度娘）。</p>
<p>内核升级结果确认</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@zyb ~]# uname -r</div><div class="line">3.10.5-3.el6.x86_64</div><div class="line">[root@zyb ~]#</div></pre></td></tr></table></figure>
<p>查看内核是否支持aufs：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@zyb ~]# grep aufs /proc/filesystems</div><div class="line">nodev	aufs</div><div class="line">[root@zyb ~]#</div></pre></td></tr></table></figure>
<p>首先关闭selinux：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@zyb ~]# setenforce 0</div><div class="line">[root@zyb ~]# sed -i &apos;/^SELINUX=/c\SELINUX=disabled&apos; /etc/selinux/config</div></pre></td></tr></table></figure>
<p>在Fedora EPEL源中已经提供了docker-io包，下载安装epel：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@zyb ~]# rpm -ivh http://mirrors.sohu.com/fedora-epel/6/x86_64/epel-</div><div class="line">release-6-8.noarch.rpm</div><div class="line">[root@zyb ~]# sed -i &apos;s/^mirrorlist=https/mirrorlist=http/&apos; /etc/yum.repos.d/epel.repo</div></pre></td></tr></table></figure>
<p>yum安装docker-io：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@zyb ~]# yum -y install docker-io</div></pre></td></tr></table></figure>
<p>安装之后启动 Docker 服务，并让它随系统启动自动加载，确认Docker进程:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@zyb ~]# chkconfig docker on</div><div class="line">[root@zyb ~]# service docker start</div><div class="line">Starting docker:	                                   [  OK  ]</div><div class="line">[root@zyb ~]# ps -ef|grep docker</div><div class="line">root      70454      1  1 17:13 pts/1    00:00:00 /usr/bin/docker -d</div><div class="line">root      70560  28112  0 17:13 pts/1    00:00:00 grep docker</div><div class="line">[root@zyb ~]#</div></pre></td></tr></table></figure>
<p>支持Docker在CentOS 6上安装完毕。</p>
<h5 id="3-2-2-CentOS-7上安装Docker"><a href="#3-2-2-CentOS-7上安装Docker" class="headerlink" title="3.2.2) CentOS 7上安装Docker"></a>3.2.2) CentOS 7上安装Docker</h5><p>CentOS7 系统CentOS-Extras库中已带 Docker，可以直接安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo yum install docker</div></pre></td></tr></table></figure>
<p>安装之后启动 Docker 服务，并让它随系统启动自动加载。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo service docker start</div><div class="line">$ sudo chkconfig docker on</div></pre></td></tr></table></figure>
<hr>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/08/Docker-（一）-Docker的特性，核心概念及安装/" data-id="ciwg1464p0001egtwpr0estod" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/12/08/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/12/08/Docker-（一）-Docker的特性，核心概念及安装/">Docker-（一）-Docker的特性，核心概念及安装</a>
          </li>
        
          <li>
            <a href="/2016/12/08/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 呆子萌的<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>